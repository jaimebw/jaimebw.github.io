---
import SiteNav from "../components/SiteNav.astro";
import GoogleAnalytics from "../components/GoogleAnalytics.astro";
import "../styles/global.css";
import "katex/dist/katex.min.css";

interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
}

const { title, description, ogImage } = Astro.props;
const siteTitle = "Jaime Bowen Varela";
const pageLabel = title ?? "Home";
const metaDescription =
  description ??
  "Aero-software engineer writing about avionics, tooling, and random obsessions.";
const canonicalUrl = Astro.site
  ? new URL(Astro.url.pathname, Astro.site).toString()
  : Astro.url.href;
const defaultOgImage = "/assets/img/jaime_bird.png";
const ogImageSource = ogImage ?? defaultOgImage;
const ogImageUrl = Astro.site
  ? new URL(ogImageSource, Astro.site).toString()
  : ogImageSource;
const today = new Date().toISOString().split("T")[0];
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageLabel} Â· {siteTitle}</title>
    <meta name="description" content={metaDescription} />
    <link rel="icon" href="/assets/img/jaime_bird.png" />
    <link rel="canonical" href={canonicalUrl} />
    <meta property="og:title" content={pageLabel} />
    <meta property="og:description" content={metaDescription} />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={pageLabel} />
    <meta name="twitter:description" content={metaDescription} />
    <meta name="twitter:image" content={ogImageUrl} />
    <GoogleAnalytics />
  </head>
  <body>
    <main>
      <table class="header">
        <tr>
          <td colspan="2" rowspan="2" class="width-auto">
            <h1 class="title">{siteTitle}</h1>
            <span class="subtitle">Aero-Software Engineer</span>
          </td>
          <th>Page</th>
          <td class="width-min">{pageLabel}</td>
        </tr>
        <tr>
          <th>Updated</th>
          <td class="width-min"><time>{today}</time></td>
        </tr>
        <tr>
          <th class="width-min">Location</th>
          <td class="width-auto">San Francisco</td>
          <th class="width-min">Links</th>
          <td>
            <a href="https://github.com/jaimebw">GitHub</a> |
            <a href="https://x.com/jaimebw">X</a> |
            <a href="https://www.linkedin.com/in/jaimebw">LinkedIn</a>
          </td>
        </tr>
      </table>
      <SiteNav currentPath={Astro.url.pathname} />
      <slot />
      <footer>
        <p>
          &copy; {new Date().getFullYear()} Jaime Bowen Varela.
          Styling borrowed from
          <a href="https://github.com/owickstrom/the-monospace-web">The Monospace Web</a>.
        </p>
      </footer>
    </main>
  </body>
</html>
